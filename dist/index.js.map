{"version":3,"file":"index.js","mappings":"mBACA,IAAIA,EAAsB,CCA1BA,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3EH,EAAwB,CAACS,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFV,EAAyBC,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,M,mCC4DvD,QAnDuB,CACfC,GAAI,GASJC,KAAM,SAAUC,EAAaC,EAA4BC,EAAkBC,EAAqBC,EAAmBC,QAAtF,IAAAJ,IAAAA,EAAA,GACzBK,KAAKR,GAAGE,GAAO,CAAEO,kBAAmBN,GACpCK,KAAKE,eAAeR,EAAKC,EAAgBC,EAAQC,EAAWC,EAASC,IAEzEG,eAAgB,SAAUR,EAAaC,EAA4BC,EAAkBC,EAAqBC,EAAmBC,GAA7G,gBAAuB,IAAAJ,IAAAA,EAAA,GACnCQ,QAAQC,IAAI,MAAOV,EAAKM,KAAKR,GAAGE,IACxB,IAAAO,EAAsBD,KAAKR,GAAGE,GAAI,kBAC1CM,KAAKR,GAAGE,GAAO,IAAIW,UAAUX,GAC7BM,KAAKR,GAAGE,GAAKY,MAAQX,EACrBK,KAAKR,GAAGE,GAAKO,kBAAoBA,EACjCD,KAAKR,GAAGE,GAAKE,OAAS,SAACW,GACnB,EAAKf,GAAGE,GAAKY,MAAQ,EAAKd,GAAGE,GAAKO,kBAClCL,EAAOW,IAEXP,KAAKR,GAAGE,GAAKc,UAAYX,EACzBG,KAAKR,GAAGE,GAAKI,QAAU,SAACS,GACO,IAAvB,EAAKf,GAAGE,GAAKY,MACbR,EAAQS,GAER,EAAKL,eAAeR,EAAK,EAAKF,GAAGE,GAAKY,MAAQ,EAAGV,EAAQC,EAAWC,EAASC,IAErFC,KAAKR,GAAGE,GAAKK,QAAU,SAACQ,GACO,IAAvB,EAAKf,GAAGE,GAAKY,OACbP,EAAQQ,KAGpBE,MAAO,SAAUf,GACTM,KAAKR,IAAMQ,KAAKR,GAAGE,KACnBM,KAAKR,GAAGE,GAAKY,MAAQ,EACrBN,KAAKR,GAAGE,GAAKe,UAGrBC,YAAa,SAAUhB,EAAKiB,GACpBX,KAAKR,IAAMQ,KAAKR,GAAGE,IACnBM,KAAKR,GAAGE,GAAKkB,KAAKD,K","sources":["webpack://multiple-websockets/webpack/bootstrap","webpack://multiple-websockets/webpack/runtime/define property getters","webpack://multiple-websockets/webpack/runtime/hasOwnProperty shorthand","webpack://multiple-websockets/webpack/runtime/make namespace object","webpack://multiple-websockets/./index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","interface CallBack {\r\n    (event: object): void\r\n}\r\ntype wsObj = {\r\n    [key: string]: any\r\n}\r\ninterface WsObject {\r\n    ws: wsObj,\r\n    open: (url: string, reconnectTimes: number, onopen: CallBack, onMessage: CallBack, onclose: CallBack, onerror: CallBack) => void,\r\n    startWebsocket: (url: string, reconnectTimes: number, onopen: CallBack, onMessage: CallBack, onclose: CallBack, onerror: CallBack) => void,\r\n    close: (url: string) => void,\r\n    sendMessage: (url: string) => void,\r\n}\r\nconst WS: WsObject = (function (): WsObject {\r\n    let obj:WsObject = {\r\n        ws: {},\r\n        /**\r\n         * @param url websocket url\r\n         * @param reconnectTimes \r\n         * @param onopen \r\n         * @param onMessage \r\n         * @param onclose \r\n         * @param onerror \r\n         */\r\n        open: function (url: string, reconnectTimes: number = 1, onopen: CallBack, onMessage: CallBack, onclose: CallBack, onerror: CallBack): void {\r\n            this.ws[url] = { maxReconnectTimes: reconnectTimes };\r\n            this.startWebsocket(url, reconnectTimes, onopen, onMessage, onclose, onerror);\r\n        },\r\n        startWebsocket: function (url: string, reconnectTimes: number = 1, onopen: CallBack, onMessage: CallBack, onclose: CallBack, onerror: CallBack) {\r\n            console.log(\"url\", url, this.ws[url])\r\n            const { maxReconnectTimes } = this.ws[url];\r\n            this.ws[url] = new WebSocket(url);\r\n            this.ws[url].times = reconnectTimes;\r\n            this.ws[url].maxReconnectTimes = maxReconnectTimes;\r\n            this.ws[url].onopen = (e: object) => {\r\n                this.ws[url].times = this.ws[url].maxReconnectTimes;\r\n                onopen(e);\r\n            };\r\n            this.ws[url].onmessage = onMessage;\r\n            this.ws[url].onclose = (e: object) => {\r\n                if (this.ws[url].times === 0)\r\n                    onclose(e)\r\n                else\r\n                    this.startWebsocket(url, this.ws[url].times - 1, onopen, onMessage, onclose, onerror);\r\n            };\r\n            this.ws[url].onerror = (e: object) => {\r\n                if (this.ws[url].times === 0)\r\n                    onerror(e)\r\n            };\r\n        },\r\n        close: function (url) {\r\n            if (this.ws && this.ws[url]) {\r\n                this.ws[url].times = 0\r\n                this.ws[url].close();\r\n            }\r\n        },\r\n        sendMessage: function (url, info?: string) {\r\n            if (this.ws && this.ws[url])\r\n                this.ws[url].send(info);\r\n        }\r\n    }\r\n    return obj;\r\n})();\r\n\r\n\r\nexport default WS;\r\n\r\n\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","ws","open","url","reconnectTimes","onopen","onMessage","onclose","onerror","this","maxReconnectTimes","startWebsocket","console","log","WebSocket","times","e","onmessage","close","sendMessage","info","send"],"sourceRoot":""}