(()=>{"use strict";var e={d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{WebSocket:()=>s,useWebsocket:()=>o});const s={ws:{},open:function(e,t,s,n,o,i){void 0===t&&(t=1),this.ws&&this.ws[e]&&this.ws[e].close(),this.ws[e]={maxReconnectTimes:t},this.startWebsocket(e,t,s,n,o,i)},startWebsocket:function(e,t,s,n,o,i){var c=this;void 0===t&&(t=1),console.log("url",e,this.ws[e]);var r=this.ws[e].maxReconnectTimes;this.ws[e]=new WebSocket(e),this.ws[e].times=t,this.ws[e].maxReconnectTimes=r,this.ws[e].onopen=function(t){c.ws[e].times=c.ws[e].maxReconnectTimes,s(t)},this.ws[e].onmessage=n,this.ws[e].onclose=function(t){0===c.ws[e].times?o(t):c.startWebsocket(e,c.ws[e].times-1,s,n,o,i)},this.ws[e].onerror=function(t){0===c.ws[e].times&&i(t)}},close:function(e){this.ws&&this.ws[e]&&(this.ws[e].times=0,this.ws[e].close())},sendMessage:function(e,t){this.ws&&this.ws[e]&&this.ws[e].send(t)}},n=require("react");function o(e,t){var o=(0,n.useRef)(null),i=(0,n.useState)(!0),c=i[0],r=i[1],u=(0,n.useState)({}),f=u[0],a=u[1];return(0,n.useEffect)((function(){return function(){o.current=!0}}),[]),(0,n.useEffect)((function(){return c||s.open(e,t,(function(e){o.current||a(e)}),(function(e){o.current||a(e)}),(function(e){o.current||a(e)}),(function(e){o.current||a(e)})),function(){s.close(e)}}),[c]),[f,function(){o.current=!1,r(!1)},function(t){s.sendMessage(e,t)},function(){r(!0)}]}var i=exports;for(var c in t)i[c]=t[c];t.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=index.js.map