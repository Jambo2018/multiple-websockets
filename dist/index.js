(()=>{"use strict";var e={d:(s,t)=>{for(var n in t)e.o(t,n)&&!e.o(s,n)&&Object.defineProperty(s,n,{enumerable:!0,get:t[n]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},s={};e.r(s),e.d(s,{WebSocket:()=>t,useWebsocket:()=>o});const t={ws:{},open:function(e,s,t,n,o,i){void 0===s&&(s=1),console.log("open"),this.ws&&this.ws[e]&&this.ws[e].isrunning?(this.ws[e].maxReconnectTimes=s,this.setCallBacks(e,s,t,n,o,i)):(this.ws[e]={maxReconnectTimes:s},this.startWebsocket(e,s,t,n,o,i))},setCallBacks:function(e,s,t,n,o,i){var c=this;void 0===s&&(s=1),console.log("setCallBacks"),this.ws[e].times=s,this.ws[e].onopen=function(s){c.ws[e].times=c.ws[e].maxReconnectTimes,c.ws[e].isrunning=!0,t(s)},this.ws[e].onmessage=function(s){c.ws[e].isrunning=!0,n(s)},this.ws[e].onclose=function(s){c.ws[e].isrunning=!1,0===c.ws[e].times?o(s):c.startWebsocket(e,c.ws[e].times-1,t,n,o,i)},this.ws[e].onerror=function(s){c.ws[e].isrunning=!1,0===c.ws[e].times&&i(s)}},startWebsocket:function(e,s,t,n,o,i){void 0===s&&(s=1),console.log("startWebsocket"),this.ws[e]=new WebSocket(e);var c=this.ws[e].maxReconnectTimes;this.ws[e].times=s,this.ws[e].maxReconnectTimes=c,this.setCallBacks(e,s,t,n,o,i)},close:function(e){console.log("close"),this.ws&&this.ws[e]&&(this.ws[e].times=0,this.ws[e].close())},sendMessage:function(e,s){console.log("sendMessage"),this.ws&&this.ws[e]&&this.ws[e].send(s)}},n=require("react");function o(e,s){var o=(0,n.useRef)(null),i=(0,n.useState)(!0),c=i[0],r=i[1],u=(0,n.useState)({}),a=u[0],l=u[1];return(0,n.useEffect)((function(){return function(){o.current=!0}}),[]),(0,n.useEffect)((function(){c||t.open(e,s,(function(e){o.current||l(e)}),(function(e){o.current||l(e)}),(function(e){o.current||l(e)}),(function(e){o.current||l(e)}))}),[c]),[a,function(){o.current=!1,r(!1)},function(s){t.sendMessage(e,s)},function(){t.close(e),r(!0)}]}var i=exports;for(var c in s)i[c]=s[c];s.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=index.js.map